!function(t){var i={};function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)e.d(n,a,function(i){return t[i]}.bind(null,a));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var n={};e.r(n),e.d(n,"ROOT_CLASS_NAME",function(){return Q}),e.d(n,"interpolateThemeClass",function(){return J}),e.d(n,"ChartThemes",function(){return $}),e.d(n,"ChartThemesColors",function(){return K}),e.d(n,"Colors",function(){return Z}),e.d(n,"months",function(){return s}),e.d(n,"TimeRanges",function(){return o}),e.d(n,"ChartVariables",function(){return h}),e.d(n,"DprSampling",function(){return c}),e.d(n,"FRAMES_PER_SECOND",function(){return l}),e.d(n,"FRAMES_DELTA_SEC",function(){return u}),e.d(n,"FRAMES_DELTA_MS",function(){return d}),e.d(n,"warp",function(){return v}),e.d(n,"warpRatio",function(){return p}),e.d(n,"animationTimeout",function(){return f}),e.d(n,"linear",function(){return g}),e.d(n,"easeInOutQuad",function(){return m}),e.d(n,"easeInOutCubic",function(){return _}),e.d(n,"objectEachKey",function(){return x}),e.d(n,"clampNumber",function(){return y}),e.d(n,"ensureNumber",function(){return C}),e.d(n,"isDate",function(){return A}),e.d(n,"throttle",function(){return w}),e.d(n,"debounce",function(){return b}),e.d(n,"isBrowserSafari",function(){return S}),e.d(n,"isTouchEventsSupported",function(){return M}),e.d(n,"isPassiveEventSupported",function(){return R}),e.d(n,"passiveIfSupported",function(){return P}),e.d(n,"isWebWorkerSupported",function(){return T}),e.d(n,"isOffscreenCanvasSupported",function(){return O}),e.d(n,"isTransformSupported",function(){return Y}),e.d(n,"getDevicePixelRatio",function(){return k}),e.d(n,"createElement",function(){return I}),e.d(n,"resolveElement",function(){return D}),e.d(n,"getElementOffset",function(){return W}),e.d(n,"getElementHeight",function(){return U}),e.d(n,"getElementWidth",function(){return B}),e.d(n,"setAttributes",function(){return j}),e.d(n,"setAttributesNS",function(){return H}),e.d(n,"setAttributeNS",function(){return X}),e.d(n,"hasClass",function(){return z}),e.d(n,"addClass",function(){return q}),e.d(n,"removeClass",function(){return G}),e.d(n,"cssText",function(){return V}),e.d(n,"camelToKebabCase",function(){return E}),e.d(n,"parseQueryString",function(){return L}),e.d(n,"zeroFill",function(){return N}),e.d(n,"arraysEqual",function(){return tt}),e.d(n,"arrayMinIndex",function(){return it}),e.d(n,"arrayMin",function(){return et}),e.d(n,"arrayMaxIndex",function(){return nt}),e.d(n,"arrayMax",function(){return at}),e.d(n,"arrayMinMaxIndexes",function(){return rt}),e.d(n,"arrayMinMax",function(){return st}),e.d(n,"binarySearchIndexes",function(){return ot}),e.d(n,"arrayDiff",function(){return ht}),e.d(n,"drawRoundedRect",function(){return ct});var a=function(){function t(){this._eventListeners={}}var i=t.prototype;return i.emit=function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];this._fireEvent.apply(this,[t].concat(e))},i.on=function(t,i,e){void 0===e&&(e=null),this.addEventListener(t,i,e)},i.once=function(t,i,e){void 0===e&&(e=null),this.addEventListenerOnce(t,i,e)},i.addEventListener=function(t,i,e){void 0===e&&(e=null),i&&this._subscribeEvent(t,i,e)},i.addEventListenerOnce=function(t,i,e){var n=this;if(void 0===e&&(e=null),i){this.addEventListener(t,function a(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];i.apply(e,s),n.removeEventListener(t,a)})}},i.removeEventListener=function(t,i){if(this._eventListeners[t]){var e=this._eventListeners[t].findIndex(function(t){var e=t[0];return i===e});e<0||this._eventListeners[t].splice(e,1)}},i.removeAllListeners=function(t){void 0===t&&(t=null),t?this._eventListeners[t]&&(this._eventListeners[t]=null,delete this._eventListeners[t]):this._eventListeners={}},i._allocateEvent=function(t){this._eventListeners[t]=this._eventListeners[t]||[]},i._subscribeEvent=function(t,i,e){this._allocateEvent(t),this._eventListeners[t].push([i,e])},i._fireEvent=function(t){for(var i=this._eventListeners[t]||[],e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];for(var r=0;r<i.length;++r){var s=i[r],o=s[0],h=s[1];o.apply(h,n)}},t}(),r=function(){function t(){this._lastUpdateMs=0,this._lastUpdateMs=performance.now()}return t.prototype.getDelta=function(){var t=performance.now(),i=t-this._lastUpdateMs;return this._lastUpdateMs=t,i},t}(),s=["January","February","March","April","May","June","July","August","September","October","November","December"],o={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},h={enableOffscreenCanvas:!1,minWidth:100,mainMaxHeight:337,mainChartHeight:290,mainChartOffsetTop:15,mainChartOffsetBottom:32,chartPaddingLeftRight:12,navigationChartHeight:40,navigationChartUIHeight:44,navigationChartOffsetY:388,initialViewportScale:.25},c={main:2,axis:1.8,ui:1.25,navSeries:2.3,navUI:1},l=60,u=1/60,d=1e3/60;function v(t,i,e){return void 0===e&&(e=u),t*p(i,e)}function p(t,i){return void 0===i&&(i=u),t/i}function f(t){void 0===t&&(t=0);for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return new Promise(function(i){var n=i.bind.apply(i,[null].concat(e)),a=function(){return requestAnimationFrame(n)};t?setTimeout(function(t){return a()},t):a()})}var g=function(t){return t},m=function(t){return t<.5?2*t*t:(4-2*t)*t-1},_=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1};function x(t,i){void 0===i&&(i=function(){}),Object.keys(t).forEach(i)}function y(t,i,e){if(void 0===i&&(i=-1/0),void 0===e&&(e=1/0),i>e){var n=[e,i];i=n[0],e=n[1]}return t>e&&(t=e),t<i&&(t=i),t}function C(t){return t=Number(t),Number.isNaN(t)?0:t}function A(t){return t instanceof Date&&!isNaN(t.valueOf())}function w(t,i){var e,n,a=!1;return function r(){if(a)return e=arguments,void(n=this);t.apply(this,arguments),a=!0,setTimeout(function(t){a=!1,e&&(r.apply(n,e),e=n=null)},i)}}function b(t,i){var e;return function(){var n=this,a=arguments;clearTimeout(e),e=setTimeout(function(){return t.apply(n,a)},i)}}function S(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function M(){return"ontouchstart"in document.documentElement}function R(){var t=!1;try{var i={get passive(){t=!0}};window.addEventListener("test",i,i),window.removeEventListener("test",i,i)}catch(i){t=!1}return t}function P(t){return void 0===t&&(t=!0),!!R()&&{passive:t}}var T=function(){return void 0!==window.Worker},O=function(){return void 0!==window.OffscreenCanvas};function Y(){var t=document.createElement("div");return t&&void 0!==t.style.transform}function k(t){void 0===t&&(t=1.25);var i=window.devicePixelRatio||1;return i>1.25?1+(i-1)/t:i}function V(t){return void 0===t&&(t={}),Object.keys(t).reduce(function(i,e){return(i?i+" ":"")+E(e)+": "+t[e]+";"},"")}function E(t){return t?((t=String(t))[0].toLowerCase()+t.substr(1)).replace(/([A-Z])/g,"-$1").toLowerCase():""}function L(t){var i=t.split("?").slice(1);return i.length?i[0].split("&").map(function(t){var i,e=t.split("=");return(i={})[e[0]]=e[1],i}).reduce(function(t,i){return Object.assign(t,i)}):{}}function N(t){return t<10?"0"+t:t}function I(t,i,e,n){void 0===i&&(i={}),void 0===e&&(e=[]),void 0===n&&(n=null);var a=n?document.createElementNS(n,t):document.createElement(t);return i.attrs&&(i.useNS?H(a,i.attrs,i.attrsNS||null):j(a,i.attrs)),(e||Array.isArray(e))&&(e=[].concat(e)).forEach(function(t){"string"==typeof t?/[<>]/i.test(t)?a.innerHTML+=t:a.textContent+=t:a.appendChild(t)}),a}function D(t){return"string"!=typeof t?t:document.querySelector(t)}function W(t){if(!t)return{top:0,left:0};try{var i=t.getBoundingClientRect(),e=t.ownerDocument.defaultView;return{top:i.top+e.pageYOffset,left:i.left+e.pageXOffset}}catch(t){return{top:0,left:0}}}function U(t){return t.innerHeight||t.clientHeight}function B(t){return t.innerWidth||t.clientWidth}Number.prototype.format=function(t,i,e,n){void 0===t&&(t=0),void 0===i&&(i=3),void 0===e&&(e=" "),void 0===n&&(n=".");var a="\\d(?=(\\d{"+(i||3)+"})+"+(t>0?"\\D":"$")+")",r=this.toFixed(Math.max(0,~~t));return(n?r.replace(".",n):r).replace(new RegExp(a,"g"),"$&"+(e||" "))};var F=[];function j(t,i){void 0===i&&(i={}),t=D(t),x(i,function(e){var n=F.includes(e)?e:E(e);t.setAttribute(n,i[e])})}function H(t,i,e){void 0===i&&(i={}),void 0===e&&(e=null),t=D(t),x(i,function(n){var a=F.includes(n)?n:E(n);t.setAttributeNS(e,a,i[n])})}function X(t,i,e,n){n=n||null,t.setAttributeNS(n,i,e)}function z(t,i){return new RegExp("(\\s|^)"+i+"(\\s|$)").test(t.className)}function q(t,i){void 0===i&&(i=[]),i=[].concat(i);for(var e=t.className,n=0;n<i.length;++n)z(t,i[n])||(e+=" "+i[n]);t.className=e.trim()}function G(t,i){void 0===i&&(i=[]),i=[].concat(i);for(var e=t.className.split(" "),n=new Set(i),a="",r=0;r<e.length;++r)n.has(e[r])||(a+=" "+e[r]);t.className=a.trim()}var Q="telechart2-root";function J(t){return Q+"_theme_"+t}var $={default:"default",dark:"dark"},K={default:"#ffffff",dark:"#242F3E"},Z={default:{color:"#FFFFFF",sliderBorder:"#C0D1E1",sliderOverlay:"#E2EEF9",sliderOverlayAlpha:.6,axisTextColor:"#8E8E93",axisTextColorAlpha:1,axisColor:"#182D3B",axisColorAlpha:.1,barAxisTextColorX:"#252529",barAxisTextColorAlphaX:.5,barAxisTextColorY:"#252529",barAxisTextColorAlphaY:.5,barAllColor:"#000000",maskColor:"#FFFFFF",maskColorAlpha:.5},dark:{color:"#242F3E",sliderBorder:"#56626D",sliderOverlay:"#304259",sliderOverlayAlpha:.6,axisTextColor:"#A3B1C2",axisTextColorAlpha:.6,axisColor:"#FFFFFF",axisColorAlpha:.1,barAxisTextColorX:"#A3B1C2",barAxisTextColorAlphaX:.6,barAxisTextColorY:"#ECF2F8",barAxisTextColorAlphaY:.5,barAllColor:"#FFFFFF",maskColor:"#242F3E",maskColorAlpha:.5}};function tt(t,i,e){if(void 0===e&&(e=null),!Array.isArray(t)||!Array.isArray(i)||t.length!==i.length)return!1;for(var n=0;n<t.length;++n)if(e){if(t[n][e]!==i[n][e])return!1}else if(t[n]!==i[n])return!1;return!0}function it(t,i,e){void 0===i&&(i=0),void 0===e&&(e=t.length-1);for(var n=i,a=i+1;a<=e;++a)t[n]>t[a]&&(n=a);return n}function et(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.length-1),t[it(t,i,e)]}function nt(t,i,e){void 0===i&&(i=0),void 0===e&&(e=t.length-1);for(var n=i,a=i+1;a<=e;++a)t[n]<t[a]&&(n=a);return n}function at(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.length-1),t[nt(t,i,e)]}function rt(t,i,e){void 0===i&&(i=0),void 0===e&&(e=t.length-1);for(var n=i,a=i,r=i+1;r<=e;++r)t[a]<t[r]&&(a=r),t[n]>t[r]&&(n=r);return[n,a]}function st(t,i,e){void 0===i&&(i=0),void 0===e&&(e=t.length-1);var n=rt(t,i,e),a=n[0],r=n[1];return[t[a],t[r]]}function ot(t,i,e){void 0===e&&(e=1);var n=0,a=t.length-1;if(!t.length||e*i<e*t[n])return[-1,0];if(e*i>e*t[a])return[a,a+1];for(;a-n>1;){var r=n+(a-n>>1);e*i<=e*t[r]?a=r:n=r}return t[a]===i?n=a:t[n]===i&&(a=n),[n,a]}function ht(t,i){void 0===t&&(t=[]),void 0===i&&(i=[]);for(var e=Object.create(null),n=0;n<t.length;++n)e[t[n]]=!0;for(var a=[],r=0;r<i.length;++r)e[i[r]]||a.push(i[r]);return a}function ct(t,i,e,n,a,r){void 0===r&&(r={});var s=r,o=s.tl,h=void 0===o?0:o,c=s.tr,l=void 0===c?0:c,u=s.bl,d=void 0===u?0:u,v=s.br,p=void 0===v?0:v;t.beginPath(),t.moveTo(i+h,e),t.lineTo(i+n-l,e),t.quadraticCurveTo(i+n,e,i+n,e+l),t.lineTo(i+n,e+a-p),t.quadraticCurveTo(i+n,e+a,i+n-p,e+a),t.lineTo(i+d,e+a),t.quadraticCurveTo(i,e+a,i,e+a-d),t.lineTo(i,e+h),t.quadraticCurveTo(i,e,i+h,e),t.closePath()}function lt(t,i,e){return(lt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,i,e){var n=[null];n.push.apply(n,i);var a=new(Function.bind.apply(t,n));return e&&ut(a,e.prototype),a}).apply(null,arguments)}function ut(t,i){return(ut=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function dt(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vt=1,pt={NOT_STARTED:1,RUNNING:2,PAUSED:3,COMPLETED:4,CANCELLED:5},ft="started",gt="paused",mt="complete",_t="cancelled",xt={timeScale:1,duration:500,timingFunction:"linear"},yt=function(t){var i,e;function a(i,e,n,a){var r;return void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===a&&(a={}),(r=t.call(this)||this)._id=vt++,r._params={},r._state=pt.NOT_STARTED,r._timeScale=xt.timeScale,r._timeElapsed=0,r._duration=xt.duration,r._timingFunctionName=xt.timingFunction,r._timingFunction=function(){},r._target=null,r._properties=[],r._targetValues=[],r._startValues=[],r._target=i,r._properties=[].concat(e),r._targetValues=[].concat(n),r._initParams(a),r}e=t,(i=a).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,a.create=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return lt(a,i)};var r,s,o,h=a.prototype;return h.update=function(t){this.isRunning&&(t*=this._timeScale,this._timeElapsed+=t,this._updateAnimation(t),this._checkDuration())},h.start=function(){this.isNotStarted&&(this._startValues=this._getPropertyValues(this._properties)),this._state=pt.RUNNING,this.emit(ft)},h.pause=function(){this._state=pt.PAUSED,this.emit(gt)},h.finish=function(){this._state=pt.COMPLETED,this.emit(mt,this._timeElapsed),this._dispose()},h.cancel=function(){this._state=pt.CANCELLED,this.emit(_t,this._timeElapsed),this._dispose()},h.patchAnimation=function(t){void 0===t&&(t=[]),this._targetValues=[].concat(t),this._startValues=this._getPropertyValues(this._properties),this._timeElapsed=0},h.setTimeScale=function(t){void 0===t&&(t=1),this._timeScale=t},h._initParams=function(t){var i=this._params=Object.assign({},xt,t),e=i.timeScale,n=i.duration,a=i.timingFunction;this._timeScale=e,this._duration=n,this._timingFunctionName=a,this._timingFunction=this._getTimingFunction(a)},h._updateAnimation=function(t){for(var i=this.progress,e=this._timingFunction(i),n=0,a=this._properties.length;n<a;++n){var r=this._properties[n],s=(this._targetValues[n]-this._startValues[n])*e;this._target[r]=this._startValues[n]+s}},h._checkDuration=function(){this._timeElapsed>=this._duration&&this.finish()},h._getPropertyValues=function(t){void 0===t&&(t=[]);for(var i=[],e=0,n=t.length;e<n;++e)i[e]=this._getPropertyValue(t[e]);return i},h._getPropertyValue=function(t){return this._target[t]||0},h._getTimingFunction=function(t){var i=xt.timingFunction;return n[t]||n[i]},h._dispose=function(){this._params=null,this._timingFunction=null,this._targetValues=null,this._startValues=null,this._properties=null,this._target=null,this.removeAllListeners()},r=a,(s=[{key:"id",get:function(){return this._id}},{key:"isNotStarted",get:function(){return this._state===pt.NOT_STARTED}},{key:"isRunning",get:function(){return this._state===pt.RUNNING}},{key:"isPaused",get:function(){return this._state===pt.PAUSED}},{key:"isCompleted",get:function(){return this._state===pt.COMPLETED}},{key:"timeScale",get:function(){return this._timeScale}},{key:"duration",get:function(){return this._duration}},{key:"timingFunctionName",get:function(){return this._timingFunctionName}},{key:"timingFunction",get:function(){return this._timingFunction}},{key:"timeRemaining",get:function(){return Math.max(0,Math.min(this._duration,this._duration-this._timeElapsed))}},{key:"progress",get:function(){return Math.min(1,Math.max(0,this._timeElapsed/this._duration))}},{key:"currentFirstValue",get:function(){return this._target[this._properties[0]]}}])&&dt(r.prototype,s),o&&dt(r,o),a}(a),Ct={chart:"chart",navigatorChart:"navigatorChart"};function At(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wt=1,bt=1,St=2,Mt=function(t){var i,e;function n(i,e,n){var a;return void 0===e&&(e={}),(a=t.call(this)||this)._id=wt++,a.chart=null,a.isMainChart=!1,a.settings={},a.seriesOptions={},a.xAxis=[],a.yAxis=[],a._name=null,a._label=null,a._color="#31a8dc",a.strokeWidth=1,a._visible=!0,a._pathUpdateNeeded=!1,a.localMaxY=0,a.localMinY=0,a._globalMaxY=0,a._globalMinY=0,a.opacity=1,a.seriesIndex=-1,a.opacityAnimation=null,a.opacityAnimationType=null,a.chart=i,a.seriesIndex=n,a.isMainChart=i.chartType===Ct.chart,a.settings=e,a._parseSettings(),a}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.initialize=function(){this.setType(Ot.line)},o.update=function(t){var i=!1;this._pathUpdateNeeded&&(this._pathUpdateNeeded=!1,i=!0),this.opacityAnimation&&this.opacityAnimation.isRunning&&(this.opacityAnimation.update(t),i=!0),i&&(this.chart.redrawChartNeeded=!0)},o.render=function(t,i){if(void 0===t&&(t=this.chart.telechart.mainContext),!this.opacity)return i;var e=this.chart._viewportPointsIndexes;return!e.length||e[1]-e[0]<=0?i:(i&&0!==i.length||(i=[]),this.drawByInterval(t,e,this.chart.viewportPointsStep,i))},o.drawByInterval=function(t,i,e,n){void 0===e&&(e=1),t.globalAlpha=this.opacity,t.strokeStyle=this._color,t.lineWidth=this.strokeWidth,t.lineJoin="bevel",t.lineCap="butt",t.beginPath(),this.chart.isYScaled&&0!==this.seriesIndex?this.drawPathToContext(t,i,e,{viewportPixelY:this.chart.viewportPixelY2,currentLocalMinY:this.chart.currentLocalMinY2}):this.drawPathToContext(t,i,e),t.stroke()},o.drawPathToContext=function(t,i,e,n){void 0===e&&(e=1),void 0===n&&(n={});var a=n||{},r=a.viewportRange,s=void 0===r?this.chart.viewportRange:r,o=a.viewportPixelX,h=void 0===o?this.chart.viewportPixelX:o,c=a.viewportPixelY,l=void 0===c?this.chart.viewportPixelY:c,u=a.currentLocalMinY,d=void 0===u?this.chart.currentLocalMinY:u,v=i[0],p=i[1],f=s[0],g=this.chart.chartHeight,m=this.chart.seriesOffsetTop+g,_=f/h,x=d/l;t.moveTo(this.xAxis[v]/h-_,m-(this.yAxis[v]/l-x));for(var y=v+1;y<=p;y+=e)t.lineTo(this.xAxis[y]/h-_,m-(this.yAxis[y]/l-x))},o.setVisible=function(){this._visible=!0,this._createShowAnimation(),this.emit("visibleChange",this._visible)},o.setInvisible=function(){this._visible=!1,this._createHideAnimation(),this.emit("visibleChange",this._visible)},o.toggleVisible=function(){this._visible?this.setInvisible():this.setVisible()},o.updateLocalExtremes=function(){var t=this.chart._viewportRangeIndexes,i=t[0],e=t[1],n=st(this.yAxis,i,e),a=n[0],r=n[1];this.localMinY=a,this.localMaxY=r},o.updateGlobalExtremes=function(){var t=st(this.yAxis,0,this.xAxis.length-1),i=t[0],e=t[1];this._globalMinY=i,this._globalMaxY=e},o.requestPathUpdate=function(){this._pathUpdateNeeded=!0},o.setType=function(t){this.type=t},o._parseSettings=function(){var t=this.settings,i=t.xAxis,e=t.yAxis,n=t.label,a=(t.type,t.color),r=t.name,s=t.options,o=void 0===s?{}:s;this.xAxis=i,this.yAxis=e,this._label=n,this._color=a,this._name=r;var h=o.strokeWidth,c=void 0===h?1:h;this.strokeWidth=c,this.seriesOptions=o},o._createShowAnimation=function(){this.opacityAnimation&&this.opacityAnimationType===St||(this._createOpacityAnimation(1),this.opacityAnimationType=St)},o._createHideAnimation=function(){this.opacityAnimation&&this.opacityAnimationType===bt||(this._createOpacityAnimation(0),this.opacityAnimationType=bt)},o._createOpacityAnimation=function(t){var i=this,e=this.chart.isPercentage?"easeInOutCubic":"easeInOutQuad";this.opacityAnimation=new yt(this,"opacity",t,{duration:300,timingFunction:e});var n=function(t){i.opacityAnimation=null,i.opacityAnimationType=null,i.requestPathUpdate()};this.opacityAnimation.on(mt,n),this.opacityAnimation.on(_t,n),this.opacityAnimation.start()},a=n,(r=[{key:"id",get:function(){return this._id}},{key:"label",get:function(){return this._label}},{key:"color",get:function(){return this._color}},{key:"name",get:function(){return this._name}},{key:"isVisible",get:function(){return this._visible}},{key:"globalMinY",get:function(){return this._globalMinY}},{key:"globalMaxY",get:function(){return this._globalMaxY}},{key:"isShowing",get:function(){return this.opacityAnimationType===St}},{key:"isHiding",get:function(){return this.opacityAnimationType===bt}}])&&At(a.prototype,r),s&&At(a,s),n}(a);var Rt=function(t){var i,e;function n(){return t.apply(this,arguments)||this}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a=n.prototype;return a.initialize=function(){t.prototype.initialize.call(this),this.setType(Ot.bar)},a.drawByInterval=function(t,i,e,n){return void 0===e&&(e=1),this.drawBarsToContext(t,i,e,n)},a.drawBarsToContext=function(t,i,e,n,a){void 0===e&&(e=1),void 0===n&&(n=[]),void 0===a&&(a={});var r=a||{},s=r.viewportRange,o=void 0===s?this.chart.viewportRange:s,h=r.viewportPixelX,c=void 0===h?this.chart.viewportPixelX:h,l=r.viewportPixelY,u=void 0===l?this.chart.viewportPixelY:l,d=r.currentLocalMinY,v=void 0===d?this.chart.currentLocalMinY:d,p=i[0],f=i[1],g=o[0],m=this.chart.chartHeight,_=g/c,x=v/u+(this.chart.seriesOffsetTop+m),y=this.opacity,C=this.xAxis[p+e]-this.xAxis[p];C||(C=this.xAxis[p]-this.xAxis[p-e]);var A=.5*C;t.fillStyle=this.color;for(var w=p,b=0;w<=f;w+=e,++b){n[b]=n[b]||0;var S=n[b],M=this.yAxis[w]*y;n[b]+=M;var R=(this.xAxis[w]-A)/c-_-.5,P=x-(S+M)/u-.5,T=C/c+1,O=M/u+1;t.fillRect(R,P,T,O)}return t.fill(),n},n}(Mt);var Pt,Tt=function(t){var i,e;function n(){return t.apply(this,arguments)||this}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a=n.prototype;return a.initialize=function(){t.prototype.initialize.call(this),this.setType(Ot.area)},a.drawByInterval=function(t,i,e,n){return void 0===e&&(e=1),this.drawAreasToContext(t,i,e,n)},a.drawAreasToContext=function(t,i,e,n,a){void 0===e&&(e=1),void 0===n&&(n=[]),void 0===a&&(a={});var r=this.chart.seriesOffsetTop+(this.chart.isMainChart?14:0),s=this.chart.chartHeight-(this.chart.isMainChart?14:0),o=a||{},h=o.viewportRange,c=void 0===h?this.chart.viewportRange:h,l=o.viewportPixelX,u=void 0===l?this.chart.viewportPixelX:l,d=o.viewportPixelY,v=void 0===d?100/s:d,p=o.currentLocalMinY,f=void 0===p?0:p,g=i[0],m=i[1],_=c[0]/u,x=f/v+(r+s),y=this.opacity,C=this.chart.stackedSumTree,A=this.chart.computeSumTreeChunkOffset(),w=this.chart.areaAdditionalSumsNeeded,b=this.chart.areaAdditionalSums;t.globalAlpha=1,t.fillStyle=this.color,t.beginPath();for(var S=g,M=0;S<=m;S+=e,++M){n[M]=n[M]||0;var R=n[M],P=C[A+S]+(w?b[S]:0),T=this.yAxis[S]/P*100*y;n[M]+=T;var O=this.xAxis[S]/u-_,Y=x-R/v;S===g?t.moveTo(O,Y):t.lineTo(O,Y),S===m&&(t.lineTo(O,r),t.lineTo(this.xAxis[g]/u-_,r))}return t.closePath(),t.fill(),n},n}(Mt),Ot={x:"x",line:"line",bar:"bar",area:"area"},Yt=((Pt={})[Ot.line]=Mt,Pt[Ot.bar]=Rt,Pt[Ot.area]=Tt,Pt),kt="seriesVisibleChange",Vt="forceButtonsUpdate",Et="showCursor",Lt="hideCursor",Nt="redrawCursor",It="translateMarkers";var Dt=1,Wt=2,Ut=3,Bt=function(t){var i,e;function n(i){var e;return(e=t.call(this)||this).chart=null,e.axesValues=[],e.elements=[],e.animations=[],e.updateAnimationsNeeded=!1,e.redrawNeeded=!0,e.fontSize=12,e.chart=i,e}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a=n.prototype;return a.initialize=function(){this.updateValues(),this.initializeWrappers()},a.update=function(t){this.hasActiveAnimations&&this.animationTick(t),this.updateAnimationsNeeded&&(this.updateAnimations(this.updateAnimationsWithoutAnimations),this.updateAnimationsNeeded=!1,this.updateAnimationsWithoutAnimations=!1)},a.render=function(){(this.redrawNeeded||this.chart.telechart.forceRedraw)&&(this.redraw(),this.redrawNeeded=!1)},a.redraw=function(){},a.requestUpdateAnimations=function(t){void 0===t&&(t=!1),this.updateAnimationsWithoutAnimations=t,this.updateAnimationsNeeded=!0},a.requestRedraw=function(){this.redrawNeeded=!0},a.animationTick=function(t){for(var i=!1,e=0;e<this.animations.length;++e){var n=this.animations[e];n&&n.isRunning&&(n.update(t),this.redrawNeeded=!0,i=!0)}this.hasActiveAnimations=i},a.updateAnimations=function(t){void 0===t&&(t=!1);var i=this.axesValues;this.updateValues();var e=ht(this.axesValues,i),n=this.axesValues.filter(function(t){return-1===i.indexOf(t)});this.createNewElements(n,t),this.deleteOldElements(e,t)},a.createNewElements=function(t,i){for(var e=[],n=0;n<t.length;++n){var a=this._getElementByValue(t[n]);if(!a||a.state!==Wt){var r=!1;a?a.animation?a.startOpacity=a.animationObject.opacity:a.startOpacity=0:(a=this.initializeWrapper(t[n],i),r=!0,this.elements.push(a)),(!r||r&&!i)&&e.push(a)}}if(e.length){var s=this.createShowingAnimation(e);this.animations.push(s)}},a.initializeWrapper=function(t){},a.deleteOldElements=function(t,i){for(var e=[],n=0;n<t.length;++n){var a=this._getElementByValue(t[n]);a&&a.state!==Ut&&(i?this.detachElement(a):(a.animation?a.startOpacity=a.animationObject.opacity:a.startOpacity=1,e.push(a)))}if(e.length){var r=this.createHidingAnimation(e);this.animations.push(r)}},a.createShowingAnimation=function(t){var i=this,e={opacity:0},n=new yt(e,"opacity",1,{duration:200,timingFunction:"easeInOutQuad"});n.on(mt,function(e){for(var a=0;a<t.length;++a){var r=t[a];r.animationId===n.id&&(r.animation=null,r.animationId=null,r.animationObject=null,r.state=Dt,r.opacity=1)}i.detachAnimation(n)}),n.start();for(var a=0;a<t.length;++a){var r=t[a];r.animation=n,r.animationId=n.id,r.animationObject=e,r.startOpacity=r.startOpacity||0,r.opacityScale=1-r.startOpacity,r.state=Wt}return this.hasActiveAnimations=!0,n},a.createHidingAnimation=function(t){var i=this,e={opacity:1},n=new yt(e,"opacity",0,{duration:150,timingFunction:"easeInOutQuad"});n.on(mt,function(e){for(var a=0;a<t.length;++a){var r=t[a];r.animationId===n.id&&(r.animation=null,r.animationId=null,r.animationObject=null,r.state=Dt,r.opacity=0,i.detachElement(r))}i.detachAnimation(n)}),n.start();for(var a=0;a<t.length;++a){var r=t[a];r.animation=n,r.animationId=n.id,r.animationObject=e,r.startOpacity=r.startOpacity||1,r.opacityScale=r.startOpacity,r.state=Ut}return this.hasActiveAnimations=!0,n},a.detachElement=function(t){var i=this._getElementIndexById(t.id);this.elements.splice(i,1)},a.detachAnimation=function(t){var i=this._getAnimationIndexById(t.id);this.animations.splice(i,1)},a.initializeWrappers=function(){for(var t=this.axesValues,i=0;i<t.length;++i){var e=this.initializeWrapper(t[i]);e.state=Dt,e.opacity=1,this.elements.push(e)}},a.computeAxisValues=function(){return[]},a.updateValues=function(){this.axesValues=this.computeAxisValues()},a.onChartResize=function(){this.redrawNeeded=!0,this.redraw()},a.eachElement=function(t){void 0===t&&(t=function(){});for(var i=0;i<this.elements.length;++i)t(this.elements[i])},a._getElementByValue=function(t){for(var i=0;i<this.elements.length;++i){if(t===this.elements[i].value)return this.elements[i]}},a._getElementIndexByValue=function(t){for(var i=0;i<this.elements.length;++i)if(t===this.elements[i].value)return i;return-1},a._getElementIndexById=function(t){for(var i=0;i<this.elements.length;++i)if(t===this.elements[i].id)return i;return-1},a._getAnimationIndexById=function(t){for(var i=0;i<this.animations.length;++i)if(t===this.animations[i].id)return i;return-1},n}(a);function Ft(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jt=1,Ht=function(t){var i,e;function n(i,e){var n;return(n=t.call(this,i)||this).isDoubleAxis=!1,n.isDoubleAxis=e,n}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.redraw=function(){var t=this.chart.telechart.axisContext;t.clearRect(0,0,this.chart.chartWidth,this.chart.chartHeight+this.chart.seriesOffsetTop+1);var i=this.chart.series[0],e=!this.isDoubleAxis||i.isVisible;this.drawLeft(t,e)},o.drawLeft=function(t,i){void 0===i&&(i=!1);var e=this.chart.series[0];if(!(this.isDoubleAxis&&e.opacity<=0)){var n=this.textColorLeft,a=this.textColorLeftAlpha,r=this.axesColor,s=this.axesColorAlpha,o=this.fontSize;t.font=o+"px Arial",t.fillStyle=n,t.textAlign="left",t.strokeStyle=r,t.lineWidth=1;for(var h=this.chart.viewportPadding,c=this.chart.chartWidth-2*this.chart.viewportPadding,l=this.chart.chartHeight+this.chart.seriesOffsetTop+this.chart.seriesOffsetBottom,u=13<this.elements.length,d=0;d<this.elements.length;++d){var v=this.elements[d],p=this._computeValuePosition(v.value);if(!(p<0||p>l)){var f=!!v.animation,g=!!f&&v.state===Wt,m=f?g?v.startOpacity+v.animationObject.opacity*v.opacityScale:v.animationObject.opacity*v.opacityScale:v.opacity;u&&m<.3||(t.globalAlpha=a*m*(this.isDoubleAxis?e.opacity:1),t.fillText(v.formattedValue,h,p-5),i&&(t.globalAlpha=s*m,t.beginPath(),t.moveTo(h,p),t.lineTo(h+c,p),t.stroke()))}}}},o.computeAxisValues=function(){var t=this.chart,i=this.chart.isPercentage,e=this.chart.computeViewportPixelY(t.localMinY,t.localMaxY),n=t.localMinY,a=t.localMaxY-(i?5:(this.chart.seriesOffsetTop+this.fontSize)*e)-n;if(!a)return[];for(var r=this.chart.isPercentage?4:5,s=a/r,o=n,h=[o],c=0;c<=r;++c)h.unshift(o+s),o+=s;return h},o.initializeWrapper=function(t,i){return void 0===i&&(i=!1),{id:jt++,value:t,formattedValue:this.formatNumber(t),opacity:i?1:0,startOpacity:i?1:0,animation:null,animationId:null,state:Wt}},o.updateValues=function(){t.prototype.updateValues.call(this)},o._computeValuePosition=function(t){return this.chart.projectYToCanvas(t)},o.roundValue=function(t){return~~(t+.5)},o.formatNumber=function(t){var i=Math.abs(C(t)),e="";return 1*(i>=1e9?(e="B",i/1e9):i>=1e6?(e="M",i/1e6):i>=1e3?(e="K",i/1e3):i).toFixed(e?1:0)+e},a=n,(r=[{key:"textColor",get:function(){return this.chart.isBarChart||this.chart.isPercentage?this.chart.telechart.themeColors.barAxisTextColorY:this.chart.telechart.themeColors.axisTextColor}},{key:"textColorAlpha",get:function(){return this.chart.isBarChart||this.chart.isPercentage?this.chart.telechart.themeColors.barAxisTextColorAlphaY:this.chart.telechart.themeColors.axisTextColorAlpha}},{key:"textColorLeft",get:function(){return this.chart.isYScaled?this.chart.series[0].color:this.textColor}},{key:"textColorLeftAlpha",get:function(){return this.chart.isYScaled?1:this.textColorAlpha}},{key:"textColorRight",get:function(){return this.chart.isYScaled?this.chart.series[1].color:this.textColor}},{key:"textColorRightAlpha",get:function(){return this.chart.isYScaled?1:this.textColorAlpha}},{key:"axesColor",get:function(){return this.chart.telechart.themeColors.axisColor}},{key:"axesColorAlpha",get:function(){return this.chart.telechart.themeColors.axisColorAlpha}}])&&Ft(a.prototype,r),s&&Ft(a,s),n}(Bt);var Xt=function(t){var i,e;function n(){return t.apply(this,arguments)||this}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a=n.prototype;return a.redraw=function(){var t=this.chart.telechart.axisContext,i=this.chart.series[0],e=!this.isDoubleAxis||!i.isVisible;this.drawRight(t,e)},a.drawRight=function(t,i){void 0===i&&(i=!1);var e=this.chart.series[1];if(!(e.opacity<=0)){var n=this.textColorRight,a=this.textColorRightAlpha,r=this.axesColor,s=this.axesColorAlpha,o=this.fontSize;t.font=o+"px Arial",t.fillStyle=n,t.textAlign="right",t.strokeStyle=r,t.lineWidth=1;for(var h=this.chart.chartWidth-this.chart.viewportPadding,c=this.chart.chartWidth-2*this.chart.viewportPadding,l=this.chart.chartHeight+this.chart.seriesOffsetTop+this.chart.seriesOffsetBottom,u=0;u<this.elements.length;++u){var d=this.elements[u],v=this._computeValuePosition(d.value);if(!(v<0||v>l)){var p=!!d.animation,f=!!p&&d.state===Wt,g=p?f?d.startOpacity+d.animationObject.opacity*d.opacityScale:d.animationObject.opacity*d.opacityScale:d.opacity;t.globalAlpha=a*g*(this.isDoubleAxis?e.opacity:1),t.fillText(d.formattedValue,h,v-5),i&&(t.globalAlpha=s*g,t.beginPath(),t.moveTo(this.chart.viewportPadding,v),t.lineTo(this.chart.viewportPadding+c,v),t.stroke())}}}},a.computeAxisValues=function(){var t=this.chart,i=this.chart.computeViewportPixelY2(t.localMinY2,t.localMaxY2),e=t.localMinY2,n=t.localMaxY2-(this.chart.seriesOffsetTop+this.fontSize)*i-e;if(!n)return[];for(var a=n/5,r=e,s=[r],o=0;o<6;++o)s.unshift(r+a),r+=a;return s},a._computeValuePosition=function(t){return this.chart.projectYToCanvas2(t)},n}(Ht);function zt(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qt=1,Gt=function(t){var i,e;function n(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this).dateCache=Object.create({}),i.axesValuesMapping={},i.labelWidth=37,i.interval=null,i}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.redraw=function(){var t=this.chart.telechart.axisContext,i=this.chart.chartHeight+this.chart.seriesOffsetTop+1;t.clearRect(0,i,this.chart.chartWidth,this.chart.seriesOffsetBottom),this.draw(t)},o.draw=function(t){var i=this.textColor,e=this.textColorAlpha,n=this.fontSize;t.font=n+"px Arial",t.fillStyle=i,t.textAlign="center";for(var a=this.chart.chartHeight+this.chart.seriesOffsetTop+this.fontSize+4,r=-this.labelWidth/2,s=this.chart.chartWidth+this.labelWidth/2,o=0;o<this.elements.length;++o){var h=this.elements[o],c=this._computeValuePosition(this.axesValuesMapping[h.value]);if(!(c<r||c>s)){var l=!!h.animation,u=!!l&&h.state===Wt,d=l?u?h.startOpacity+h.animationObject.opacity*h.opacityScale:h.animationObject.opacity*h.opacityScale:h.opacity;t.globalAlpha=e*d,t.fillText(h.formattedValue,c,a)}}},o.computeAxisValues=function(){var t=this.chart,i=t.chartWidth,e=this.chart.viewportPixelX,n=t.viewportRange[0],a=t.viewportRange[1];if(!(a-n))return[];var r=i/60;null==this.interval&&(this.interval=e*i/r);var s=this.interval/e;s<60?this.interval*=2:s>120&&(this.interval*=.5);var o=a-60*e/2;if(this.axesValues.length>0){for(var h=!1,c=this.axesValues.length-1;c>=0;--c){var l=this.axesValuesMapping[this.axesValues[c]],u=l-this.interval,d=l+this.interval;if(a>u&&a<d){o=l,h=!0;break}}var v=this.axesValuesMapping[this.axesValues[this.axesValues.length-1]];!h&&v+2*this.interval>=a&&(o=v+this.interval)}for(var p=[];o>=n;)p.unshift(o),o-=this.interval;return p},o.initializeWrapper=function(t,i){void 0===i&&(i=!1);var e=this._toDateString(t),n=e.split(" ");return e=[n[0],n[1]].join(" "),{id:qt++,value:t,formattedValue:e,opacity:i?1:0,startOpacity:i?1:0,animation:null,animationId:null,state:Wt}},o.updateValues=function(){var i=this;t.prototype.updateValues.call(this);for(var e=this.axesValues.map(function(t){return i._toDateString(t)}),n=0;n<e.length;++n)this.axesValuesMapping[e[n]]=this.axesValues[n];this.axesValues=e},o._computeValuePosition=function(t){return this.chart.projectXToCanvas(t)},o._toDateString=function(t,i){if(void 0===i&&(i=!1),"string"==typeof t)return t;var e=(t=Math.floor(t)).toString();if(this.dateCache[e])return this.dateCache[e];var n=new Date(t),a=n.toUTCString().split(" "),r=a[2]+" "+a[1]+" "+n.getFullYear(),s=r;return i&&(s=N(n.getHours())+":"+N(n.getMinutes())+" "+r),this.dateCache[e]=s,s},a=n,(r=[{key:"textColor",get:function(){return this.chart.isBarChart||this.chart.isPercentage?this.chart.telechart.themeColors.barAxisTextColorX:this.chart.telechart.themeColors.axisTextColor}},{key:"textColorAlpha",get:function(){return this.chart.isBarChart||this.chart.isPercentage?this.chart.telechart.themeColors.barAxisTextColorAlphaX:this.chart.telechart.themeColors.axisTextColorAlpha}}])&&zt(a.prototype,r),s&&zt(a,s),n}(Bt);function Qt(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Jt=1,$t=function(t){var i,e;function n(i,e){var n;return void 0===e&&(e={}),(n=t.call(this)||this)._id=Jt++,n._type="",n.telechart=null,n.options=null,n._groupingPixels=2,n.xAxis=[],n.series=[],n._viewportRange=[],n._viewportRangeIndexes=[],n._viewportPointsIndexes=[0,0],n.viewportPointsStep=1,n._viewportDistance=0,n.viewportPixelX=0,n.viewportPixelY=0,n.viewportPixelY2=0,n._viewportPadding=13,n._viewportLeftPaddingScale=0,n._viewportRightPaddingScale=0,n._viewportRangeUpdateNeeded=!1,n._viewportPointsGroupingNeeded=!1,n.localMinY=0,n.localMaxY=0,n.localMinY2=0,n.localMaxY2=0,n._globalMinY=0,n._globalMaxY=0,n.currentLocalMinY=null,n.currentLocalMaxY=null,n.currentLocalMinY2=null,n.currentLocalMaxY2=null,n.minMaxYAnimation=null,n.minMaxYAnimationSign=null,n.minMaxYAnimation2=null,n.minMaxYAnimationSign2=null,n._rangeAnimation=null,n._rangeAnimationObject={},n.cursorInsideChart=!1,n.axisCursorPositionX=0,n.axisCursorPointIndex=0,n.yAxisView=null,n.yAxisView2=null,n.xAxisView=null,n.redrawChartNeeded=!0,n.isLineChart=!1,n.isBarChart=!1,n.isYScaled=!1,n.isPercentage=!1,n.isStacked=!1,n.stackedSumTree=[],n.areaAdditionalSums=[],n.areaAdditionalSumsNeeded=!1,n.telechart=i,n.options=e,n}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.initialize=function(){this.createSeries(),this.isMainChart&&this.isStacked&&this.initializeStackedSumTree(),this.addEvents(),this.setInitialRange(),this.approximateViewportPoints(),this.isMainChart&&(this.initializeAxisY(),this.initializeAxisX()),this.isPercentage&&(this.areaAdditionalSums=Array(this.xAxis.length).fill(0))},o.update=function(t){var i=!1,e=!1,n=!1,a=this.minMaxYAnimation,r=!1;a&&a.isRunning&&(this.minMaxYAnimation.update(t),r=!0,i=!0,e=!0);var s=this.minMaxYAnimation2;s&&s.isRunning&&(this.minMaxYAnimation2.update(t),r=!0,i=!0,e=!0);var o=this._rangeAnimation&&this._rangeAnimation.isRunning;(this._viewportRangeUpdateNeeded||o)&&(o?(this._rangeAnimation.update(t),this.updateViewportRange([this._rangeAnimationObject.from,this._rangeAnimationObject.to],{skipExtremes:!1})):this.updateViewportRange(),this._viewportRangeUpdateNeeded=!1,i=!0,e=!0),this._viewportPointsGroupingNeeded&&(this.approximateViewportPoints(),this._viewportPointsGroupingNeeded=!1),r&&this.updateViewportPixel();for(var h=0,c=this.series.length;h<c;++h){var l=this.series[h],u=l.isHiding||l.isShowing;(r||u)&&(l.requestPathUpdate(),i=!0,n=!0,this.isYScaled&&(e=!0)),l.update(t)}this.yAxisView&&(e&&this.yAxisView.requestRedraw(),this.yAxisView.update(t)),this.yAxisView2&&(e&&this.yAxisView2.requestRedraw(),this.yAxisView2.update(t)),this.xAxisView&&(e&&this.xAxisView.requestRedraw(),this.xAxisView.update(t)),this.redrawChartNeeded=this.redrawChartNeeded||i,this.isPercentage&&(n?this.rebuildAdditionalAreaSums():this.areaAdditionalSumsNeeded=!1)},o.render=function(){(this.redrawChartNeeded||this.telechart.forceRedraw)&&(this.redrawChart(),this.redrawChartNeeded=!1);var t=this.telechart.forceRedraw;this.yAxisView&&this.yAxisView.redrawNeeded&&(t=!0),this.yAxisView2&&this.yAxisView2.redrawNeeded&&(t=!0),t&&(this.yAxisView&&(this.yAxisView.requestRedraw(),this.yAxisView.render()),this.yAxisView2&&(this.yAxisView2.requestRedraw(),this.yAxisView2.render())),this.xAxisView&&this.xAxisView.render()},o.redrawChart=function(){},o.createSeries=function(){var t=this.options||{},i=t.series,e=t.seriesOptions,n=void 0===e?{}:e,a=n.grouping;a&&a.pixels&&(this._groupingPixels=C(a.pixels));var r=i.columns,s=i.types,o=i.colors,h=i.names,c=i.y_scaled,l=void 0!==c&&c,u=i.percentage,d=void 0!==u&&u,v=i.stacked,p=void 0!==v&&v;this.isYScaled=l,this.isPercentage=d,this.isStacked=p,this.isStacked||this.isPercentage||(this.isLineChart=!0);var f=r.findIndex(function(t){return s[t[0]]===Ot.x}),g=this.xAxis=r[f].slice(1),m=r.slice();m.splice(f,1);for(var _=0;_<m.length;++_){var x=m[_].slice(),y=x.shift(),A=s[y],w=o[y],b=h[y];"bar"===A&&(this.isLineChart=!1,this.isBarChart=!0);var S={xAxis:g,yAxis:x,label:y,type:A,color:w,name:b,options:this.extendSeriesOptions(n)},M=new(Yt[A]||Mt)(this,S,_);M.initialize(),this.series.push(M)}},o.initializeStackedSumTree=function(){for(var t=Math.pow(2,this.series.length),i=this.series,e=this.xAxis.length,n=i.map(function(t){return t.yAxis}),a=[],r=0,s=0;s<t;++s)for(var o=0;o<e;++o){var h=0;if(s)for(var c=0;c<n.length;++c)s&1<<c&&(h+=n[c][o]);a[r++]=h}this.stackedSumTree=a},o.rebuildAdditionalAreaSums=function(){var t=this.series.filter(function(t){return!!t.opacityAnimation});if(!t.length)return this.areaAdditionalSumsNeeded=!1;for(var i=this._viewportPointsIndexes,e=i[0],n=i[1],a=this.viewportPointsStep,r=e;r<=n;r+=a){for(var s=0,o=0;o<t.length;++o){var h=t[o];h.opacityAnimationType===bt?s+=h.opacity*h.yAxis[r]:s-=h.yAxis[r]-h.opacity*h.yAxis[r]}this.areaAdditionalSums[r]=s}this.areaAdditionalSumsNeeded=!0},o.initializeAxisY=function(){var t=new Ht(this,this.isYScaled);if(t.initialize(),this.yAxisView=t,this.isYScaled){var i=new Xt(this,this.isYScaled);i.initialize(),this.yAxisView2=i}},o.initializeAxisX=function(){var t=new Gt(this);t.initialize(),this.xAxisView=t},o.setInitialRange=function(){this.setViewportRange()},o.animateViewportRangeTo=function(t,i,e){var n=this;void 0===t&&(t=-1/0),void 0===i&&(i=1/0),void 0===e&&(e={});var a=e,r=a.duration,s=void 0===r?300:r,o=a.timingFunction,h=void 0===o?"easeInOutQuad":o,c=a.preservePadding,l=void 0!==c&&c,u=this._clampViewportRange(t,i,l),d=u[0],v=u[1];if(this._rangeAnimation)return this._rangeAnimation.patchAnimation([d,v]);this._rangeAnimationObject={from:this._viewportRange[0],to:this._viewportRange[1]},this._rangeAnimation=new yt(this._rangeAnimationObject,["from","to"],[d,v],{duration:s,timingFunction:h});var p=function(t){n._rangeAnimation=null};this._rangeAnimation.on(mt,p),this._rangeAnimation.on(_t,p),this._rangeAnimation.start()},o.setViewportRange=function(t,i,e){var n=this;void 0===t&&(t=-1/0),void 0===i&&(i=1/0);var a=void 0===e?{}:e,r=a.skipExtremes,s=void 0!==r&&r,o=a.preservePadding,h=void 0!==o&&o,c=this._viewportDistance;this._setViewportRange(t,i,h);var l=Math.abs(c-this._viewportDistance)>.01,u=this._viewportRangeIndexes;this._updateViewportIndexes();var d=!1;tt(this._viewportRangeIndexes,u)||(u.length>0&&(this._viewportPointsGroupingNeeded=!0),d=!0);var v=!s&&d;this.eachSeries(function(t){v&&!n.isStacked&&t.updateLocalExtremes(),t.requestPathUpdate()}),v&&(this.updateLocalExtremes(),this.isYScaled&&this.updateLocalExtremes2()),this.updateViewportPixel(),this.xAxisView&&(this.xAxisView.requestUpdateAnimations(!l),this.xAxisView.requestRedraw()),this.emit(Nt),this.isMainChart&&this._cursorShowing&&this._setInsideChartState(!1,!0)},o.updateViewportRange=function(t,i){void 0===t&&(t=this._viewportRange),void 0===i&&(i={});var e=i,n=e.skipExtremes,a=void 0===n||n,r=e.preservePadding,s=void 0===r||r;this.setViewportRange(t[0],t[1],{skipExtremes:a,preservePadding:s})},o.approximateViewportPoints=function(){var t=this._viewportRangeIndexes,i=t[0],e=t[1];if(i=Math.max(0,i-1),(e=Math.min(this.xAxis.length-1,e+1))-i<100&&!this.isNavigatorChart)return this._viewportPointsIndexes[0]=i,this._viewportPointsIndexes[1]=e,void(this.viewportPointsStep=1);for(var n=(1+this.xAxis.length>300?Math.max(0,(e-i)/this.xAxis.length):1)*this._groupingPixels*this.viewportPixelX,a=i,r=1,s=i+1;s<=e;++s){if(this.xAxis[s]-this.xAxis[a]>=n||s===e)if(a!==s-1)if(1===r){r=s-1-a;break}}for(r=Math.pow(2,Math.floor(Math.log2(r)));i%r!=0;)i--;for(;e%r!=0;)e++;e=Math.min(e,this.xAxis.length-1),this._viewportPointsIndexes[0]=i,this._viewportPointsIndexes[1]=e,this.viewportPointsStep=r},o.updateLocalExtremes=function(){var t=this.isLineChart,i=this.isYScaled,e=this.isStacked,n=this.isPercentage,a=t?1/0:0,r=0;if(i){var s=this.series[0];if(!s.isVisible)return;a>s.localMinY&&(a=s.localMinY),r<s.localMaxY&&(r=s.localMaxY)}else if(e&&!n){var o=this.computeSumTreeChunkOffset(),h=this._viewportRangeIndexes,c=h[0],l=h[1];r=at(this.stackedSumTree,o+c,o+l)}else n?r=105:this.eachSeries(function(t){t.isVisible&&(a>t.localMinY&&(a=t.localMinY),r<t.localMaxY&&(r=t.localMaxY))});var u=this.localMinY,d=this.localMaxY;this.localMinY=a,this.localMaxY=r;var v=!1;"number"!=typeof this.currentLocalMinY?this.currentLocalMinY=this.localMinY:this.localMinY!==u&&(v=!0),"number"!=typeof this.currentLocalMaxY?this.currentLocalMaxY=this.localMaxY:this.localMaxY!==d&&(v=!0),v&&(this._updateOrCreateMinMaxYAnimation(),this.yAxisView&&this.yAxisView.requestUpdateAnimations(),this.yAxisView2&&this.yAxisView2.requestUpdateAnimations())},o.updateLocalExtremes2=function(){var t=this.isLineChart?1/0:0,i=0,e=this.series[1];if(e&&e.isVisible){t>e.localMinY&&(t=e.localMinY),i<e.localMaxY&&(i=e.localMaxY);var n=this.localMinY2,a=this.localMaxY2;this.localMinY2=t,this.localMaxY2=i;var r=!1;"number"!=typeof this.currentLocalMinY2?this.currentLocalMinY2=this.localMinY2:this.localMinY2!==n&&(r=!0),"number"!=typeof this.currentLocalMaxY2?this.currentLocalMaxY2=this.localMaxY2:this.localMaxY2!==a&&(r=!0),r&&(this._updateOrCreateMinMaxYAnimation2(),this.yAxisView&&this.yAxisView.requestUpdateAnimations(),this.yAxisView2&&this.yAxisView2.requestUpdateAnimations())}},o.computeViewportPixelX=function(t,i){return void 0===t&&(t=this._viewportRange[0]),void 0===i&&(i=this._viewportRange[1]),(i-t)/this.chartWidth},o.computeViewportPixelY=function(t,i){return void 0===t&&(t=this.currentLocalMinY),void 0===i&&(i=this.currentLocalMaxY),(i-t)/this.chartHeight},o.computeViewportPixelY2=function(t,i){return void 0===t&&(t=this.currentLocalMinY2),void 0===i&&(i=this.currentLocalMaxY2),(i-t)/this.chartHeight},o.updateViewportPixel=function(){this.viewportPixelX=this._viewportDistance/this.chartWidth,this.viewportPixelY=this.computeViewportPixelY(),this.isYScaled&&(this.viewportPixelY2=this.computeViewportPixelY2())},o.computeViewportPadding=function(t,i){return this.computeViewportPixelX(t,i)*this._viewportPadding},o.addEvents=function(){var t=this;this.telechart.on("resize",function(i){t.onResize()}),this.eachSeries(function(i){i.on("visibleChange",function(e){t.onSeriesVisibleChange(i)})})},o.onResize=function(){this._viewportRangeUpdateNeeded=!0,this._viewportPointsGroupingNeeded=!0,this.yAxisView&&this.yAxisView.onChartResize(),this.yAxisView2&&this.yAxisView2.onChartResize(),this.xAxisView&&this.xAxisView.onChartResize(),this.redrawChartNeeded=!0,this.redrawChart(),this.emit(Nt)},o.onSeriesVisibleChange=function(t){this.updateLocalExtremes(),this.isYScaled&&this.updateLocalExtremes2(),this.emit(kt,t)},o.getSeriesByLabel=function(t){return this.findSeries(function(i){return i.label===t})},o.setSeriesVisible=function(t){var i=this.getSeriesByLabel(t);i&&i.setVisible()},o.setSeriesInvisible=function(t){var i=this.getSeriesByLabel(t);i&&i.setInvisible()},o.toggleSeries=function(t){var i=this.getSeriesByLabel(t);i&&(i.toggleVisible(),this._setInsideChartState(!1,!0))},o.toggleAllSeriesExcept=function(t){var i=this.getSeriesByLabel(t);if(i&&!i.isVisible)this.eachSeries(function(i){i.label===t?i.setVisible():i.setInvisible()});else{for(var e=!0,n=0;n<this.series.length;++n)if(this.series[n].isVisible&&this.series[n].label!==t){e=!1;break}e?this.eachSeries(function(i){i.label===t?i.setInvisible():i.setVisible()}):this.eachSeries(function(i){i.label!==t&&i.setInvisible()})}this.emit(Vt),this._setInsideChartState(!1,!0)},o.findSeries=function(t){for(var i=0;i<this.series.length;++i)if(t(this.series[i]))return this.series[i]},o.eachSeries=function(t){void 0===t&&(t=function(){});for(var i=0;i<this.series.length;++i)t(this.series[i],i)},o.extendSeriesOptions=function(t){return t},o.setChartType=function(t){this._type=t},o.projectXToCanvas=function(t){return this.toRelativeX(t)/this.viewportPixelX},o.projectYToCanvas=function(t){return y(this.seriesOffsetTop+this.chartHeight-(t-this.currentLocalMinY)/this.viewportPixelY||0,-1e6,1e6)},o.projectYToCanvas2=function(t){return y(this.seriesOffsetTop+this.chartHeight-(t-this.currentLocalMinY2)/this.viewportPixelY2||0,-1e6,1e6)},o.projectCursorToX=function(t){var i=t.pageX,e=void 0===i?0:i,n=(t.pageY,e-this.telechart.canvasOffset.left);return this.viewportRange[0]+n*this.viewportPixelX},o.computeSumTreeN=function(){for(var t=0,i=0;i<this.series.length;++i)this.series[i].isVisible&&(t|=1<<i);return t},o.computeSumTreeChunkOffset=function(){return this.xAxis.length*this.computeSumTreeN()},o.toRelativeX=function(t){return t-this._viewportRange[0]},o._updateViewportIndexes=function(){var t=this._viewportRange,i=t[0],e=t[1],n=ot(this.xAxis,i),a=(n[0],n[1]),r=ot(this.xAxis,e),s=r[0];r[1];this._viewportRangeIndexes=[a,s]},o._setViewportRange=function(t,i,e){void 0===e&&(e=!1);var n=this._clampViewportRange(t,i,e),a=n[0],r=n[1];this._viewportRange=[a,r],this._viewportDistance=r-a},o._clampViewportRange=function(t,i,e){void 0===e&&(e=!1);var n=this.xAxis,a=n[0],r=n[n.length-1];if(A(t)&&(t=t.getTime()),A(i)&&(i=i.getTime()),t>i){var s=[i,t];t=s[0],i=s[1]}var o=y(t,a,r),h=y(i,a,r),c=this.computeViewportPadding(o,h),l=y(o-t,0,c),u=y(i-h,0,c);return e||(this._viewportLeftPaddingScale=l/c),this._viewportLeftPaddingScale>0&&(o-=c*this._viewportLeftPaddingScale),e||(this._viewportRightPaddingScale=u/c),this._viewportRightPaddingScale>0&&(h+=c*this._viewportRightPaddingScale),[o,h]},o._updateOrCreateMinMaxYAnimation=function(){return this.minMaxYAnimation?this.currentLocalExtremeDifference<this.localExtremeDifference!==this.minMaxYAnimationSign?this._createMinMaxYAnimation():void this._patchMinMaxYAnimation():this._createMinMaxYAnimation()},o._updateOrCreateMinMaxYAnimation2=function(){return this.minMaxYAnimation2?this.currentLocalExtremeDifference2<this.localExtremeDifference2!==this.minMaxYAnimationSign2?this._createMinMaxYAnimation2():void this._patchMinMaxYAnimation2():this._createMinMaxYAnimation2()},o._createMinMaxYAnimation=function(){var t=this;this.minMaxYAnimation&&this.minMaxYAnimation.cancel(),this._updateMinMaxAnimationSign(),this.minMaxYAnimation=new yt(this,["currentLocalMinY","currentLocalMaxY"],[this.localMinY,this.localMaxY],{duration:300,timingFunction:"easeInOutQuad"});var i=function(i){t.minMaxYAnimation=null};this.minMaxYAnimation.on(mt,i),this.minMaxYAnimation.on(_t,i),this.minMaxYAnimation.start()},o._createMinMaxYAnimation2=function(){var t=this;this.minMaxYAnimation2&&this.minMaxYAnimation2.cancel(),this._updateMinMaxAnimationSign2(),this.minMaxYAnimation2=new yt(this,["currentLocalMinY2","currentLocalMaxY2"],[this.localMinY2,this.localMaxY2],{duration:300,timingFunction:"easeInOutQuad"});var i=function(i){t.minMaxYAnimation2=null};this.minMaxYAnimation2.on(mt,i),this.minMaxYAnimation2.on(_t,i),this.minMaxYAnimation2.start()},o._patchMinMaxYAnimation=function(){this.minMaxYAnimation.patchAnimation([this.localMinY,this.localMaxY])},o._patchMinMaxYAnimation2=function(){this.minMaxYAnimation2.patchAnimation([this.localMinY2,this.localMaxY2])},o._updateMinMaxAnimationSign=function(){this.minMaxYAnimationSign=this.currentLocalExtremeDifference<this.localExtremeDifference},o._updateMinMaxAnimationSign2=function(){this.minMaxYAnimationSign2=this.currentLocalExtremeDifference2<this.localExtremeDifference2},a=n,(r=[{key:"id",get:function(){return this._id}},{key:"chartType",get:function(){return this._type}},{key:"isMainChart",get:function(){return this._type===Ct.chart}},{key:"isNavigatorChart",get:function(){return this._type===Ct.navigatorChart}},{key:"viewportRange",get:function(){return this._viewportRange}},{key:"viewportRangeIndexes",get:function(){return this._viewportRangeIndexes}},{key:"viewportPadding",get:function(){return this._viewportPadding}},{key:"localExtremeDifference",get:function(){return this.localMaxY-this.localMinY}},{key:"localExtremeDifference2",get:function(){return this.localMaxY2-this.localMinY2}},{key:"globalExtremeDifference",get:function(){return this._globalMaxY-this._globalMinY}},{key:"currentLocalExtremeDifference",get:function(){return this.currentLocalMaxY-this.currentLocalMinY}},{key:"currentLocalExtremeDifference2",get:function(){return this.currentLocalMaxY2-this.currentLocalMinY2}},{key:"globalMinY",get:function(){return this._globalMinY}},{key:"globalMaxY",get:function(){return this._globalMaxY}},{key:"chartWidth",get:function(){return this.telechart.canvasWidth}},{key:"chartHeight",get:function(){return h.mainChartHeight}},{key:"seriesOffsetTop",get:function(){return h.mainChartOffsetTop}},{key:"seriesOffsetBottom",get:function(){return h.mainChartOffsetBottom}}])&&Qt(a.prototype,r),s&&Qt(a,s),n}(a);function Kt(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zt=1,ti="started",ii="paused",ei="paused",ni={NOT_STARTED:1,RUNNING:2,PAUSED:4,FINISHED:6},ai=function(t){var i,e;function n(i,e,n){var a;return void 0===n&&(n={}),(a=t.call(this)||this)._id=Zt++,a._timeScale=1,a._state=ni.NOT_STARTED,a._velocity=1,a._acceleration=0,a._fromPosition=null,a._toPosition=null,a._currentPosition=0,a._startPosition=0,a._options={},a._fromPosition=i,a._toPosition=e,a._initOptions(n),a}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.update=function(t){this.isRunning&&(this._updateVelocity(t),this._updateCurrentPosition(t))},o.start=function(){this.isRunning||(this._state=ni.RUNNING,this._startPosition=this._fromPosition,this._currentPosition=this._startPosition,this.emit(ti))},o.pause=function(){this._state=ni.PAUSED,this.emit(ii)},o.finish=function(){this._state=ni.FINISHED,this.emit(ei),this._dispose()},o.reset=function(){this._state=ni.NOT_STARTED,this._initOptions(this._options),this._currentPosition=this._fromPosition,this._startPosition=this._fromPosition},o.setToPosition=function(t){this._toPosition=t},o.setAcceleration=function(t){this._acceleration=t},o.setTimeScale=function(t){this._timeScale=t},o.setVelocity=function(t){this._velocity=t},o._initOptions=function(t){this._options=t;var i=t.timeScale,e=void 0===i?1:i,n=t.velocity,a=void 0===n?1:n,r=t.maxVelocity,s=void 0===r?1:r,o=t.acceleration,h=void 0===o?0:o;this._timeScale=e,this._velocity=a,this._maxVelocity=s,this._acceleration=h},o._updateCurrentPosition=function(t){if(null===this._toPosition)return this.dispose();var i=Math.sign(this._toPosition-this._currentPosition);this._currentPosition+=i*this._computeDeltaDistance(t),this.distanceToDestination<.1&&this.finish()},o._updateVelocity=function(t){this._acceleration&&(this._velocity=Math.min(this._maxVelocity,this._velocity+v(this._acceleration,t)))},o._computeDeltaDistance=function(t){var i=this._timeScale*(this._velocity*t+this._acceleration*t*t*.5);return Math.min(i,this.distanceToDestination)},o._dispose=function(){this._fromPosition=null,this._toPosition=null,this._currentPosition=null,this._startPosition=null,this._options=null,this.removeAllListeners()},a=n,(r=[{key:"timeScale",get:function(){return this._timeScale}},{key:"id",get:function(){return this._id}},{key:"velocity",get:function(){return this._velocity}},{key:"isRunning",get:function(){return this._state===ni.RUNNING}},{key:"isPaused",get:function(){return this._state===ni.PAUSED}},{key:"isFinished",get:function(){return this._state===ni.FINISHED}},{key:"fromPosition",get:function(){return this._fromPosition}},{key:"toPosition",get:function(){return this._toPosition}},{key:"startPosition",get:function(){return this._startPosition}},{key:"currentPosition",get:function(){return this._currentPosition}},{key:"distanceToDestination",get:function(){return Math.abs(this._toPosition-this._currentPosition)}}])&&Kt(a.prototype,r),s&&Kt(a,s),n}(a),ri="init",si="updateEnvironment",oi="setTheme",hi="setTitle",ci="initializeButtons",li="updateButtons",ui="toggleSeries",di="updateDataLabel",vi="setDataLabelVisibility",pi="setNavigationRange",fi="mainCanvasEvent",gi="navUICanvasEvent";function mi(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _i={inactive:0,showing:1,hiding:2},xi=function(t){var i,e;function n(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this)._type=Ct.chart,i._firstCursorAnimation=!0,i.redrawCursorRequested=!1,i.cursorAnimation=null,i.cursorOpacityAnimation=null,i.cursorOpacity=0,i.cursorAnimationType=_i.inactive,i}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.initialize=function(){t.prototype.initialize.call(this),this.addCursorEvents()},o.update=function(i){t.prototype.update.call(this,i);var e=!1;this.hasCursorOpacityAnimation&&(this.cursorOpacityAnimation.update(i),e=!0),this.hasCursorAnimation&&(this.cursorAnimation.update(i),e=!0),this.minMaxYAnimation&&this.minMaxYAnimation.isRunning&&(e=!0),this.minMaxYAnimation2&&this.minMaxYAnimation2.isRunning&&(e=!0),e&&this.requestRedrawCursor()},o.render=function(){t.prototype.render.call(this),this.redrawUIOverlay()},o.redrawChart=function(){var t=this.telechart.mainContext;t.clearRect(0,0,this.telechart.canvasWidth,h.mainMaxHeight);for(var i=[],e=0,n=this.series.length;e<n;++e)i=this.series[e].render(t,i)},o.redrawUIOverlay=function(){(this.redrawCursorRequested||this.telechart.forceRedraw)&&(this.redrawCursor(),this.isLineChart&&this.redrawMarkers(),this.redrawCursorRequested=!1)},o.requestRedrawCursor=function(){this.cursorDrewBefore=!0,this.redrawCursorRequested=!0},o.redrawCursor=function(){var t=this.telechart.uiContext;if(this.cursorDrewBefore&&t.clearRect(0,0,this.chartWidth,h.mainMaxHeight),this.cursorOpacity<=0)return this.cursorDrewBefore=!1;this.isBarChart?this.drawCursorBar(t):this.drawCursorLine(t),this.cursorDrewBefore=!0},o.drawCursorLine=function(t){var i=this.telechart.themeColors,e=i.axisColor,n=i.axisColorAlpha;t.globalAlpha=n*this.cursorOpacity,t.strokeStyle=e,t.lineWidth=1;var a=this.projectXToCanvas(this.axisCursorPositionX),r=this.seriesOffsetTop,s=this.seriesOffsetTop+this.chartHeight;t.beginPath(),t.moveTo(a,r),t.lineTo(a,s),t.stroke()},o.drawCursorBar=function(t){var i=this.telechart.themeColors,e=i.maskColor,n=i.maskColorAlpha;t.globalAlpha=n*this.cursorOpacity,t.fillStyle=e,t.lineWidth=1;var a=.5*((this.xAxis[this.viewportPointsStep]-this.xAxis[0])/this.viewportPixelX),r=this.projectXToCanvas(this.axisCursorPositionX),s=r-a+.3,o=r+a-.3,h=this.chartWidth+1,c=this.seriesOffsetTop+this.chartHeight+1;t.fillRect(-1,0,s- -1,c-0),t.fillRect(o,0,h-o,c-0)},o.redrawMarkers=function(){if(!(this.cursorOpacity<=0)){var t=this.telechart.uiContext,i=this.telechart.themeColors,e=this.series,n=i.color,a=this.cursorAnimation&&this.cursorAnimation.currentPosition||this.axisCursorPositionX,r=ot(this.xAxis,a),s=r[0],o=r[1];s<0&&(s=0),o>=this.xAxis.length&&(o=this.xAxis.length-1);var h=this.xAxis[s],c=this.xAxis[o],l=0;c-h>0&&(l=(a-h)/(c-h));var u=this.projectXToCanvas(a);t.fillStyle=n,t.lineWidth=4;for(var d=0;d<e.length;++d){var v=e[d];t.strokeStyle=v.color,t.globalAlpha=v.opacity;var p=v.yAxis[s],f=p+(v.yAxis[o]-p)*l,g=0;g=this.isYScaled?0===d?this.projectYToCanvas(f):this.projectYToCanvas2(f):this.projectYToCanvas(f),t.beginPath(),t.arc(u,g,3*v.opacity*this.cursorOpacity,0,2*Math.PI),t.stroke(),t.fill()}}},o.setNavigationRange=function(t,i){var e=this._resolveNavigationRange(t,i),n=e[0],a=e[1];this.setViewportRange(n,a)},o.animateNavigationRangeTo=function(t,i){var e=this._resolveNavigationRange(t,i),n=e[0],a=e[1];this.animateViewportRangeTo(n,a)},o.setInitialRange=function(){var t=this.xAxis[0],i=this.xAxis[this.xAxis.length-1],e=Math.floor((i-t)*h.initialViewportScale),n=this.computeViewportPadding(i-e,i);this.setViewportRange(i-e-n,i+n)},o.extendSeriesOptions=function(t){return Object.assign({},t,{strokeWidth:2})},o.addCursorEvents=function(){var t=this;this.on(Nt,function(i){t.requestRedrawCursor()}),this.on(Et,function(i){t.showCursor()}),this.on(Lt,function(i){t.hideCursor()}),this.on(It,function(i){var e=i[0],n=i[1];t.translateMarkers(e,n)})},o.showCursor=function(){this.cursorOpacity>=1||this.cursorAnimationType===_i.showing||(this.cancelCursorOpacityAnimation(),this.createCursorOpacityAnimation(1))},o.hideCursor=function(){this.cursorOpacity<=0||this.cursorAnimationType===_i.hiding||(this.cancelCursorOpacityAnimation(),this.createCursorOpacityAnimation(0))},o.translateMarkers=function(t,i){if(i=this.cursorAnimation&&this.cursorAnimation.currentPosition||i,this.cursorAnimation)this.patchCursorAnimation(t,i);else{if(this.viewportRangeIndexes[1]-this.viewportRangeIndexes[0]>60)return this.axisCursorPositionX=t;var e=this.viewportRange,n=e[0]<=i&&i<=e[1];!this._firstCursorAnimation&&n||(i=t),this._firstCursorAnimation=!1,this.createCursorAnimation(t,i)}},o.createCursorOpacityAnimation=function(t){var i=this;void 0===t&&(t=0);var e=new yt(this,"cursorOpacity",t,{duration:1===t?150:300,timingFunction:"easeInOutQuad"}),n=function(t){i.cursorOpacityAnimation=null,i.cursorAnimationType=_i.inactive};e.on(mt,n),e.on(_t,n),e.start(),this.cursorOpacityAnimation=e},o.cancelCursorOpacityAnimation=function(){this.hasCursorOpacityAnimation&&(this.cursorOpacityAnimation.cancel(),this.cursorOpacityAnimation=null)},o.createCursorAnimation=function(t,i){var e=this,n=this.viewportRange[1]-this.viewportRange[0],a=new ai(i,t,{velocity:1e-6*n,acceleration:1e-7*n,maxVelocity:1e9});a.on(ei,function(t){e.cursorAnimation=null}),a.start(),this.cursorAnimation=a},o.patchCursorAnimation=function(t,i){this.cursorAnimation&&this.cursorAnimation.setToPosition(t)},o.emitEvent=function(t,i){switch(t){case"mousemove":this._onMouseMove(i);break;case"mouseleave":this._onMouseLeave(i);break;case"touchstart":this._onTouchStart(i);break;case"touchmove":this._onTouchMove(i);break;case"touchend":this._onTouchEnd(i)}},o.onResize=function(){t.prototype.onResize.call(this),this._setInsideChartState(!1,!0)},o._resolveNavigationRange=function(t,i){var e=this.xAxis[0],n=this.xAxis[this.xAxis.length-1]-e,a=e+t*n,r=e+i*n,s=this.computeViewportPadding(a,r);return[a-s,r+s]},o._onMouseMove=function(t){this._onCursorMove(t)},o._onMouseLeave=function(t){this._onCursorLeave()},o._onTouchStart=function(t){var i=t.targetTouches[0];this._onCursorMove(i)},o._onTouchMove=function(t){var i=t.targetTouches[0];this._onCursorMove(i)},o._onTouchEnd=function(t){this._onCursorLeave()},o._onCursorMove=function(t){var i=this._insideChart(t);if(this._setInsideChartState(i),i){var e=this.axisCursorPointIndex,n=this.projectCursorToX(t);this.axisCursorPointIndex=this._findPointIndexByCursor(n),this.axisCursorPositionX=this.xAxis[this.axisCursorPointIndex];var a=this.axisCursorPointIndex!==e;a&&(this.emit(It,[this.axisCursorPositionX,this.xAxis[e]]),this.emit(Nt)),this._updateLabel(a)}},o._updateLabel=function(t){void 0===t&&(t=!0);var i={changed:t,lines:this._prepareLabelData(),viewportRange:this.viewportRange};this.telechart.isWorker?this.telechart.global.postMessage({type:di,data:i}):this.telechart.dedicatedApi.updateDataLabel(i)},o._findPointIndexByCursor=function(t){var i=ot(this.xAxis,t),e=i[0],n=i[1],a=null;if(e<0&&n>=0)a=n;else if(e>=0&&n>=this.xAxis.length)a=e;else{var r=Math.abs(t-this.xAxis[e])<=Math.abs(t-this.xAxis[n]),s=this.xAxis[e]>=this.viewportRange[0],o=this.xAxis[n]<=this.viewportRange[1];a=r?s?e:n:o?n:e}return a},o._onCursorLeave=function(){this._setInsideChartState(!1)},o._setInsideChartState=function(t,i){var e=this;if(void 0===i&&(i=!1),this.cursorInsideChart!==t||i){this.cursorInsideChart=t,this._markerHideTimeout&&(clearTimeout(this._markerHideTimeout),this._markerHideTimeout=null);var n=function(i){e._onCursorInsideChartChanged(t)};t||i?n():this._markerHideTimeout=setTimeout(n,2e3)}},o._onCursorInsideChartChanged=function(t){t?this._showCursor():this._hideCursor(),this._cursorShowing=t,this._toggleDataLabelVisibility(t)},o._toggleDataLabelVisibility=function(t){this.telechart.isWorker?this.telechart.global.postMessage({type:vi,visibility:t}):this.telechart.dedicatedApi.setDataLabelVisibility(t)},o._showCursor=function(){this.emit(Et)},o._hideCursor=function(){this.emit(Lt)},o._insideChart=function(t){var i=t.pageX,e=t.pageY,n=this.telechart.canvasOffset,a=n.top,r=n.left,s=e-a-this.seriesOffsetTop,o=i-r;return s>=0&&s<=this.chartHeight&&o>=0&&o<=this.chartWidth},o._prepareLabelData=function(){var t=this,i=[],e=this.axisCursorPointIndex,n=this.xAxis[e],a=this.isBarChart,r=this.isPercentage,s=a&&this.series.length>1,o=this.computeSumTreeChunkOffset();if(this.eachSeries(function(a){var s=a.yAxis[e],h={color:a.color,label:a.label,name:a.name,visible:a.isVisible,x:n,y:s,canvasY:t.projectYToCanvas(a.yAxis[e]),canvasX:t.projectXToCanvas(a.xAxis[e])};if(r){var c=t.stackedSumTree[o+e];h.percentage=s/c*100}i.push(h)}),s){var h=this.axisCursorPointIndex,c=this.stackedSumTree[o+h];i.push({color:this.telechart.themeColors.barAllColor,label:"all",name:"All",visible:!0,x:n,y:c,canvasY:0,canvasX:0})}return i},a=n,(r=[{key:"chartHeight",get:function(){return h.mainChartHeight}},{key:"hasCursorOpacityAnimation",get:function(){return this.cursorOpacityAnimation&&this.cursorOpacityAnimation.isRunning}},{key:"hasCursorAnimation",get:function(){return this.cursorAnimation&&this.cursorAnimation.isRunning}}])&&mi(a.prototype,r),s&&mi(a,s),n}($t),yi="rangeChanged",Ci="animateRange";function Ai(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wi=function(t){var i,e;function n(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this)._type=Ct.navigatorChart,i._overlayPaddingTopBottom=1,i._paddingLeftRight=12,i._viewportPadding=0,i._sliderWidth=0,i._sliderLeftRightBorderWidth=9,i._overlayLeftWidth=0,i._overlayRightWidth=0,i.redrawSliderUINeeded=!0,i._navigatorRange=[.8-h.initialViewportScale,.8],i._navigatorRange=[1-h.initialViewportScale,1],i._navigatorRangeAnimation=null,i._navigationRangeAnimationObject=null,i._navigatorMinRangeDistance=.075,i._navigatorChangeDirection="right",i}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a,r,s,o=n.prototype;return o.initialize=function(){t.prototype.initialize.call(this),this._updateNavigatorDimensions(),this.sendRangeToApi()},o.update=function(i){t.prototype.update.call(this,i),this._navigatorRangeAnimation&&this._navigatorRangeAnimation.isRunning&&(this._navigatorRangeAnimation.update(i),this.updateNavigationRange(this._navigationRangeAnimationObject.from,this._navigationRangeAnimationObject.to),this.redrawSliderUINeeded=!0,this.sendRangeToApi())},o.render=function(){t.prototype.render.call(this),(this.redrawSliderUINeeded||this.telechart.forceRedraw)&&(this.redrawSliderUI(),this.redrawSliderUINeeded=!1)},o.redrawChart=function(){var t=this.telechart.navigationSeriesContext;t.clearRect(0,0,this.telechart.canvasWidth,h.navigationChartHeight);for(var i=[],e=0,n=this.series.length;e<n;++e)i=this.series[e].render(t,i)},o.redrawSliderUI=function(){var t=this.telechart.navigationUIContext;t.clearRect(0,0,this.chartWidth,this.navigatorHeight),this.redrawSliderOverlays(t),this.redrawSlider(t)},o.redrawSliderOverlays=function(t){var i=this._overlayLeftWidth,e=this._overlayRightWidth,n=this.telechart.themeColors;i&&(t.globalAlpha=n.sliderOverlayAlpha,t.fillStyle=n.sliderOverlay,ct(t,this._paddingLeftRight,this._overlayPaddingTopBottom,i+this._sliderLeftRightBorderWidth,this.navigatorHeight-2*this._overlayPaddingTopBottom,{tl:8,bl:8}),t.fill()),t.globalAlpha=n.sliderOverlayAlpha,t.fillStyle=n.sliderOverlay,e&&(ct(t,this._paddingLeftRight+this.navigatorWidth-e-this._sliderLeftRightBorderWidth,this._overlayPaddingTopBottom,e+this._sliderLeftRightBorderWidth,this.navigatorHeight-2*this._overlayPaddingTopBottom,{tr:8,br:8}),t.fill())},o.redrawSlider=function(t){var i=this._overlayLeftWidth,e=this._overlayRightWidth,n=this.telechart.themeColors;t.globalAlpha=1,t.fillStyle=n.sliderBorder,t.strokeStyle=n.sliderBorder;ct(t,this._paddingLeftRight+i,0,this._sliderLeftRightBorderWidth,this.navigatorHeight-0,{tl:6,bl:6}),t.fill(),ct(t,this._paddingLeftRight+this.navigatorWidth-e-this._sliderLeftRightBorderWidth,0,this._sliderLeftRightBorderWidth,this.navigatorHeight-0,{tr:6,br:6}),t.fill(),t.strokeStyle=n.sliderBorder,t.lineWidth=1,t.beginPath(),t.moveTo(this._paddingLeftRight+i+this._sliderLeftRightBorderWidth,0),t.lineTo(this._paddingLeftRight+this.navigatorWidth-e-this._sliderLeftRightBorderWidth,0),t.stroke(),t.beginPath(),t.moveTo(this._paddingLeftRight+i+this._sliderLeftRightBorderWidth,this.navigatorHeight-0),t.lineTo(this._paddingLeftRight+this.navigatorWidth-e-this._sliderLeftRightBorderWidth,this.navigatorHeight-0),t.stroke(),t.strokeStyle="white",t.lineWidth=2,t.lineCap="round",t.lineJoin="round";var a=.2*this.navigatorHeight,r=this._paddingLeftRight+i+this._sliderLeftRightBorderWidth/2,s=this.navigatorHeight/2-a/2,o=this._paddingLeftRight+this.navigatorWidth-e-this._sliderLeftRightBorderWidth/2,h=this.navigatorHeight/2+a/2;t.beginPath(),t.moveTo(r,s),t.lineTo(r,h),t.stroke(),t.beginPath(),t.moveTo(o,s),t.lineTo(o,h),t.stroke()},o.onResize=function(){t.prototype.onResize.call(this),this._updateNavigatorDimensions(),this.redrawSliderUI()},o.sendRangeToApi=function(){var t=this._navigatorRange,i=this.telechart._chart._viewportPointsIndexes,e=i[0],n=i[1],a=[Math.floor(this.xAxis[e]),Math.floor(this.xAxis[n])];this.telechart.isWorker?this.telechart.global.postMessage({type:pi,range:t,rangeX:a}):this.telechart.dedicatedApi.setNavigationRange(t,a)},o.animateNavigationRangeTo=function(t,i,e){var n=this;void 0===t&&(t=0),void 0===i&&(i=1),void 0===e&&(e={});var a=e,r=a.duration,s=void 0===r?300:r,o=a.timingFunction,h=void 0===o?"easeInOutQuad":o,c=this._clampNavigationRange(t,i),l=c[0],u=c[1];if(this._navigatorRangeAnimation)return this._navigatorRangeAnimation.patchAnimation([l,u]);this._navigationRangeAnimationObject={from:this._navigatorRange[0],to:this._navigatorRange[1]},this._navigatorRangeAnimation=new yt(this._navigationRangeAnimationObject,["from","to"],[l,u],{duration:s,timingFunction:h});var d=function(t){n._navigatorRangeAnimation=null};this._navigatorRangeAnimation.on(mt,d),this._navigatorRangeAnimation.on(_t,d),this._navigatorRangeAnimation.start(),this.emit(Ci,[l,u])},o.setNavigationRangeFromEvent=function(t,i){this.setNavigationRange(t,i)},o.setNavigationRange=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=1);var n=(void 0===e?{}:e).emitChange,a=void 0===n||n,r=this._clampNavigationRange(t,i);t=r[0],i=r[1],this._navigatorRange=[t,i],this._updateNavigatorDimensions(),this.redrawSliderUINeeded=!0,a&&this.emit(yi,this._navigatorRange),this.sendRangeToApi()},o.updateNavigationRange=function(t,i){this.setNavigationRange(t,i,{emitChange:!1})},o.emitEvent=function(t,i){for(var e=arguments.length,n=new Array(e>2?e-2:0),a=2;a<e;a++)n[a-2]=arguments[a];switch(t){case"overlay.click":this._onSliderOverlayClick.apply(this,[i].concat(n));break;case"slider.mousedown":this._onSliderMouseDown.apply(this,[i].concat(n));break;case"slider.mousemove":this._onSliderMouseMove.apply(this,[i].concat(n));break;case"slider.touchstart":this._onSliderTouchStart.apply(this,[i].concat(n));break;case"slider.touchmove":this._onSliderTouchMove.apply(this,[i].concat(n));break;case"slider-controller.mousedown":this._onSliderControllerMouseDown.apply(this,[i].concat(n));break;case"slider-controller.mousemove":this._onSliderControllerMouseMove.apply(this,[i].concat(n));break;case"slider-controller.touchstart":this._onSliderControllerTouchStart.apply(this,[i].concat(n));break;case"slider-controller.touchmove":this._onSliderControllerTouchMove.apply(this,[i].concat(n))}},o._updateNavigatorDimensions=function(){var t=this._navigatorRange[0],i=1-this._navigatorRange[1],e=this.navigatorWidth;this._overlayLeftWidth=e*t,this._overlayRightWidth=e*i,this._sliderWidth=e-this._overlayLeftWidth-this._overlayRightWidth},o._clampNavigationRange=function(t,i,e){void 0===t&&(t=0),void 0===i&&(i=1),void 0===e&&(e=!1);var n=y(i-t,this._navigatorMinRangeDistance,1);t=y(t,0,1),i=y(i,0,1);var a="right"===this._navigatorChangeDirection,r=i-t,s=e?n:this._navigatorMinRangeDistance;return r<s&&(a?i-s>=0?t=i-s:(t=0,i=s):t+s<=1?i=t+s:(i=1,t=1-s)),[t,i]},o._onSliderMouseDown=function(t){var i=t.pageX,e=t.pageY;this._sliderStartEvent={pageX:i,pageY:e},this._sliderStartPosition=this._navigatorRange.slice()},o._onSliderMouseMove=function(t){var i=this._sliderStartEvent.pageX,e=t.pageX,n=(i-(void 0===e?0:e))/this.navigatorWidth,a=this._sliderStartPosition,r=this._clampNavigationRange(a[0]-n,a[1]-n,!0),s=r[0],o=r[1];this.setNavigationRangeFromEvent(s,o)},o._onSliderTouchStart=function(t){var i=t.targetTouches[0],e=i.pageX,n=i.pageY;this._sliderStartEvent={pageX:e,pageY:n},this._sliderStartPosition=this._navigatorRange.slice()},o._onSliderTouchMove=function(t){var i=t.targetTouches[0],e=this._sliderStartEvent.pageX,n=i.pageX,a=(e-(void 0===n?0:n))/this.navigatorWidth,r=this._sliderStartPosition,s=this._clampNavigationRange(r[0]-a,r[1]-a,!0),o=s[0],h=s[1];this.setNavigationRangeFromEvent(o,h)},o._onSliderControllerMouseDown=function(t,i){var e=t.pageX,n=t.pageY;this._sliderControllerStartPosition=this._navigatorRange.slice(),this._navigatorChangeDirection=i,this._sliderControllerStartEvent={pageX:e,pageY:n}},o._onSliderControllerMouseMove=function(t){var i=this._sliderControllerStartEvent.pageX,e=t.pageX,n=(i-(void 0===e?0:e))/this.navigatorWidth,a=this._sliderControllerStartPosition,r="left"===this._navigatorChangeDirection,s=a[0]-(r?n:0),o=a[1]-(r?0:n),h=this._clampNavigationRange(s,o);s=h[0],o=h[1],r?this._sliderControllerStartPosition[1]=o:this._sliderControllerStartPosition[0]=s,this.setNavigationRangeFromEvent(s,o)},o._onSliderControllerTouchStart=function(t,i){var e=t.targetTouches[0],n=e.pageX,a=e.pageY;this._sliderControllerStartPosition=this._navigatorRange.slice(),this._navigatorChangeDirection=i,this._sliderControllerStartEvent={pageX:n,pageY:a}},o._onSliderControllerTouchMove=function(t){var i=t.targetTouches[0],e=this._sliderControllerStartEvent.pageX,n=i.pageX,a=(e-(void 0===n?0:n))/this.navigatorWidth,r=this._sliderControllerStartPosition,s="left"===this._navigatorChangeDirection,o=r[0]-(s?a:0),h=r[1]-(s?0:a),c=this._clampNavigationRange(o,h);o=c[0],h=c[1],s?this._sliderControllerStartPosition[1]=h:this._sliderControllerStartPosition[0]=o,this.setNavigationRangeFromEvent(o,h)},o._onSliderOverlayClick=function(t,i){void 0===i&&(i=0);var e=.5*(this._navigatorRange[1]-this._navigatorRange[0]),n=this._clampNavigationRange(i-e,i+e,!0),a=n[0],r=n[1];this.animateNavigationRangeTo(a,r)},a=n,(r=[{key:"chartHeight",get:function(){return h.navigationChartHeight}},{key:"navigatorWidth",get:function(){return this.chartWidth-2*this._paddingLeftRight}},{key:"navigatorHeight",get:function(){return h.navigationChartUIHeight}},{key:"seriesOffsetTop",get:function(){return 0}},{key:"seriesOffsetBottom",get:function(){return 0}},{key:"seriesContext",get:function(){return this.telechart.navigationSeriesContext}},{key:"uiContext",get:function(){return this.telechart.navigationUIContext}}])&&Ai(a.prototype,r),s&&Ai(a,s),n}($t);function bi(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Si=1,Mi=!1;try{Mi="undefined"==typeof window}catch(t){Mi=!0}var Ri=function(t){var i,e;function n(){for(var i,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return(i=t.call.apply(t,[this].concat(n))||this)._id=Si++,i.options=null,i.environmentOptions=null,i.mainCanvas=null,i.axisCanvas=null,i.uiCanvas=null,i.navigationSeriesCanvas=null,i.navigationUICanvas=null,i.context=null,i._chart=null,i._navigatorChart=null,i._themeName=$.default,i._title="",i._clock=null,i.canvasOffset={top:0,left:0},i.axisCanvasOffset={top:0,left:0},i.navigationSeriesCanvasOffset={top:0,left:0},i.navigationUICanvasOffset={top:0,left:0},i.dedicatedApi=null,i.forceRedraw=!1,i}e=t,(i=n).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e,n.create=function(t,i,e){var a=t.mainCanvas,r=t.axisCanvas,s=t.uiCanvas,o=t.navigationSeriesCanvas,h=t.navigationUICanvas,c=t.api;void 0===i&&(i={}),void 0===e&&(e={});var l=new n;return l.dedicatedApi=c,l.setOptions(i),l.setMainCanvas(a),l.setAxisCanvas(r),l.setUICanvas(s),l.setNavigationSeriesCanvas(o),l.setNavigationUICanvas(h),l.setEnvironmentOptions(e),l.initialize(),l};var a,s,o,h=n.prototype;return h.setOptions=function(t){void 0===t&&(t={}),this.options=t},h.setEnvironmentOptions=function(t){void 0===t&&(t={});var i=t,e=i.canvasOffset,n=i.canvasWidth,a=i.canvasHeight,r=i.canvasDpr,s=i.axisCanvasOffset,o=i.axisCanvasWidth,h=i.axisCanvasHeight,c=i.axisCanvasDpr,l=i.uiCanvasOffset,u=i.uiCanvasWidth,d=i.uiCanvasHeight,v=i.uiCanvasDpr,p=i.navigationSeriesCanvasOffset,f=i.navigationSeriesCanvasWidth,g=i.navigationSeriesCanvasHeight,m=i.navigationSeriesCanvasDpr,_=i.navigationUICanvasOffset,x=i.navigationUICanvasWidth,y=i.navigationUICanvasHeight,C=i.navigationUICanvasDpr;this.environmentOptions=t,this.canvasOffset=e,this.canvasWidth=n,this.canvasHeight=a,this.canvasDpr=r,this.axisCanvasOffset=s,this.axisCanvasWidth=o,this.axisCanvasHeight=h,this.axisCanvasDpr=c,this.uiCanvasOffset=l,this.uiCanvasWidth=u,this.uiCanvasHeight=d,this.uiCanvasDpr=v,this.navigationSeriesCanvasOffset=p,this.navigationSeriesCanvasWidth=f,this.navigationSeriesCanvasHeight=g,this.navigationSeriesCanvasDpr=m,this.navigationUICanvasOffset=_,this.navigationUICanvasWidth=x,this.navigationUICanvasHeight=y,this.navigationUICanvasDpr=C,this.mainContext&&(this.updateContexts(),this.onResize())},h.onResize=function(){this.emit("resize")},h.setMainCanvas=function(t){this.mainCanvas=t},h.setAxisCanvas=function(t){this.axisCanvas=t},h.setUICanvas=function(t){this.uiCanvas=t},h.setNavigationSeriesCanvas=function(t){this.navigationSeriesCanvas=t},h.setNavigationUICanvas=function(t){this.navigationUICanvas=t},h.initialize=function(){this.setTheme(this.options.theme||$.default),this.setTitle(this.options.title),this.initializeContexts(),this._createChart(),this._createNavigatorChart(),this._addEventListeners(),this.initializeButtons(),this._clock=new r,Mi&&this.nextFrame()},h.nextFrame=function(){var t=this,i=this._clock.getDelta();this.update(i),this.render(),this.global.requestAnimationFrame(function(i){return t.nextFrame()})},h.update=function(t){this._chart.update(t),this._navigatorChart.update(t)},h.render=function(){this._chart&&this._chart.render(),this._navigatorChart&&this._navigatorChart.render(),this.forceRedraw=!1},h.setTheme=function(t){this._themeName=t,this.forceRedraw=!0,this.render(),this._chart&&this._chart._updateLabel()},h.setTitle=function(t){this._title=t},h.destroy=function(){},h.initializeContexts=function(){this.mainContext=this.mainCanvas.getContext("2d"),this.axisContext=this.axisCanvas.getContext("2d"),this.uiContext=this.uiCanvas.getContext("2d"),this.navigationSeriesContext=this.navigationSeriesCanvas.getContext("2d"),this.navigationUIContext=this.navigationUICanvas.getContext("2d"),this.updateContextsScale()},h.updateContexts=function(){Mi&&(this.mainCanvas.width=this.canvasWidth*this.canvasDpr,this.mainCanvas.height=this.canvasHeight*this.canvasDpr,this.axisCanvas.width=this.axisCanvasWidth*this.axisCanvasDpr,this.axisCanvas.height=this.axisCanvasHeight*this.axisCanvasDpr,this.uiCanvas.width=this.uiCanvasWidth*this.uiCanvasDpr,this.uiCanvas.height=this.uiCanvasHeight*this.uiCanvasDpr,this.navigationSeriesCanvas.width=this.navigationSeriesCanvasWidth*this.navigationSeriesCanvasDpr,this.navigationSeriesCanvas.height=this.navigationSeriesCanvasHeight*this.navigationSeriesCanvasDpr,this.navigationUICanvas.width=this.navigationUICanvasWidth*this.navigationUICanvasDpr,this.navigationUICanvas.height=this.navigationUICanvasHeight*this.navigationUICanvasDpr),this.updateContextsScale()},h.updateContextsScale=function(){this.mainContext.scale(this.canvasDpr,this.canvasDpr),this.axisContext.scale(this.axisCanvasDpr,this.axisCanvasDpr),this.uiContext.scale(this.uiCanvasDpr,this.uiCanvasDpr),this.navigationSeriesContext.scale(this.navigationSeriesCanvasDpr,this.navigationSeriesCanvasDpr),this.navigationUIContext.scale(this.navigationUICanvasDpr,this.navigationUICanvasDpr)},h.initializeButtons=function(){var t=this._getLines();Mi?this.global.postMessage({type:ci,buttons:t}):this.dedicatedApi.initializeButtons(t)},h.updateButtons=function(){var t=this._getLines();Mi?this.global.postMessage({type:li,buttons:t}):this.dedicatedApi.updateButtons(t)},h.mainCanvasEvent=function(t,i){this._chart.emitEvent(t,i)},h.navUICanvasEvent=function(t,i,e){var n;void 0===e&&(e=[]),(n=this._navigatorChart).emitEvent.apply(n,[t,i].concat(e))},h._createChart=function(){this._chart=new xi(this,this.options),this._chart.initialize(),this._chart.isStacked&&(this._chartSumTree=this._chart.stackedSumTree)},h._createNavigatorChart=function(){this._navigatorChart=new wi(this,this.options),this._chart.isStacked&&(this._navigatorChart.stackedSumTree=this._chartSumTree),this._navigatorChart.initialize()},h._addEventListeners=function(){var t=this;this._chart.on(kt,function(i){i.isVisible?t._navigatorChart.setSeriesVisible(i.label):t._navigatorChart.setSeriesInvisible(i.label)}),this._chart.on(Vt,function(i){t.updateButtons()}),this._navigatorChart.on(yi,function(i){var e;(e=t._chart).setNavigationRange.apply(e,i)}),this._navigatorChart.on(Ci,function(i){var e;(e=t._chart).animateNavigationRangeTo.apply(e,i)})},h._getLines=function(){return this._chart.series.map(function(t){return{color:t.color,name:t.name,label:t.label,visible:t.isVisible}})},a=n,(s=[{key:"themeName",get:function(){return this._themeName}},{key:"themeColors",get:function(){return Z[this._themeName]||Z.default}},{key:"global",get:function(){return Mi?self:window}},{key:"isWorker",get:function(){return Mi}}])&&bi(a.prototype,s),o&&bi(a,o),n}(a);const Pi=new a;let Ti=null;self.addEventListener("message",t=>{const i=t.data.type||"message";Pi.emit(i,t)}),Pi.on(ri,t=>{const i=t.data;Ti=function(t){var i=t.mainCanvas,e=t.axisCanvas,n=t.uiCanvas,a=t.navigationSeriesCanvas,r=t.navigationUICanvas,s=t.api,o=void 0===s?null:s,h=t.settings,c=h.options,l=h.environmentOptions;return Ri.create({mainCanvas:i,axisCanvas:e,uiCanvas:n,navigationSeriesCanvas:a,navigationUICanvas:r,api:o},c,l)}(i)}),Pi.on(si,t=>{const{environmentOptions:i}=t.data;i&&Ti.setEnvironmentOptions(i)}),Pi.on(oi,t=>{let{themeName:i}=t.data;Ti.setTheme(i)}),Pi.on(hi,t=>{let{title:i}=t.data;Ti.setTitle(i)}),Pi.on(ui,t=>{let{label:i,longTap:e=!1}=t.data;e?Ti._chart.toggleAllSeriesExcept(i):Ti._chart.toggleSeries(i)}),Pi.on(fi,t=>{let{eventName:i,event:e}=t.data;Ti.mainCanvasEvent(i,e)}),Pi.on(gi,t=>{let{eventName:i,event:e,args:n}=t.data;Ti.navUICanvasEvent(i,e,n)})}]);